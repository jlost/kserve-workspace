{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "devspace",
            "type": "go",
            "request": "attach",
            "mode": "remote",
            "port": 2345,
            "host": "localhost",
            "trace": "verbose",
            "preLaunchTask": "Devspace Debug",
            "substitutePath": [
                {
                    "from": "${workspaceFolder}",
                    "to": "/app",
                }
            ],
        },
        {
            "name": "devspace (attach)",
            "type": "go",
            "request": "attach",
            "mode": "remote",
            "port": 2345,
            "host": "localhost",
            "trace": "verbose",
            "substitutePath": [
                {
                    "from": "${workspaceFolder}",
                    "to": "/app",
                }
            ],
        },
        {
            "name": "Unit Test by Name",
            "type": "go",
            "request": "launch",
            "mode": "test",
            "program": "${workspaceFolder}/${input:goTestPackage}",
            "args": [
                "-test.run=${input:testRunPattern}"
            ],
            "env": {
                "KUBEBUILDER_ASSETS": "${env:HOME}/.local/share/kubebuilder-envtest/k8s/1.34.1-linux-amd64"
            },
            "console": "integratedTerminal"
        },
        {
            "name": "Unit Test (Ginkgo Focus)",
            "type": "go",
            "request": "launch",
            "mode": "test",
            "program": "${workspaceFolder}/${input:goTestPackage}",
            "args": [
                "--ginkgo.focus=${input:ginkgoFocus}"
            ],
            "env": {
                "KUBEBUILDER_ASSETS": "${env:HOME}/.local/share/kubebuilder-envtest/k8s/1.34.1-linux-amd64"
            },
            "console": "integratedTerminal"
        },
        {
            "name": "All Unit Tests (Package)",
            "type": "go",
            "request": "launch",
            "mode": "test",
            "program": "${workspaceFolder}/${input:goTestPackage}",
            "env": {
                "KUBEBUILDER_ASSETS": "${env:HOME}/.local/share/kubebuilder-envtest/k8s/1.34.1-linux-amd64"
            },
            "console": "integratedTerminal"
        },
        {
            "name": "E2E Test (ODH/RHOAI)",
            "type": "debugpy",
            "request": "launch",
            "module": "pytest",
            "preLaunchTask": "Recreate E2E ns",
            "args": [
                "${input:testPath}",
                "-m",
                "${input:marker}",
                "--network-layer",
                "${input:networkLayer}",
                "-v",
                "-s",
                "--log-cli-level=INFO"
            ],
            "cwd": "${workspaceFolder}/test/e2e",
            "env": {
                "PYTHONPATH": "${workspaceFolder}/python/kserve:${env:PYTHONPATH}"
            },
            "python": "${workspaceFolder}/python/kserve/.venv/bin/python",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        {
            "name": "E2E Test (Kind)",
            "type": "debugpy",
            "request": "launch",
            "module": "pytest",
            "preLaunchTask": "Setup E2E + Port Forward (Kind)",
            "args": [
                "${input:testPath}",
                "-m",
                "${input:marker}",
                "--network-layer",
                "istio",
                "-v",
                "-s",
                "--log-cli-level=INFO"
            ],
            "cwd": "${workspaceFolder}/test/e2e",
            "env": {
                "KSERVE_INGRESS_HOST_PORT": "localhost:8080",
                "PYTHONPATH": "${workspaceFolder}/python/kserve:${env:PYTHONPATH}"
            },
            "python": "${workspaceFolder}/python/kserve/.venv/bin/python",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        {
            "name": "E2E Current File (ODH/RHOAI)",
            "type": "debugpy",
            "request": "launch",
            "module": "pytest",
            "preLaunchTask": "Recreate E2E ns",
            "args": [
                "${file}",
                "--network-layer",
                "${input:networkLayer}",
                "-v",
                "-s",
                "--log-cli-level=INFO"
            ],
            "cwd": "${workspaceFolder}/test/e2e",
            "env": {
                "PYTHONPATH": "${workspaceFolder}/python/kserve:${env:PYTHONPATH}"
            },
            "python": "${workspaceFolder}/python/kserve/.venv/bin/python",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        {
            "name": "E2E Marker (ODH/RHOAI)",
            "type": "debugpy",
            "request": "launch",
            "module": "pytest",
            "preLaunchTask": "Recreate E2E ns",
            "args": [
                "-m",
                "${input:marker}",
                "--network-layer",
                "${input:networkLayer}",
                "-v",
                "-s",
                "--log-cli-level=INFO"
            ],
            "cwd": "${workspaceFolder}/test/e2e",
            "env": {
                "PYTHONPATH": "${workspaceFolder}/python/kserve:${env:PYTHONPATH}"
            },
            "python": "${workspaceFolder}/python/kserve/.venv/bin/python",
            "console": "integratedTerminal",
            "justMyCode": false,
            "mcp": {
                "outputLimit": 20480
            }
        },
        {
            "name": "E2E Current File (Kind)",
            "type": "debugpy",
            "request": "launch",
            "module": "pytest",
            "preLaunchTask": "Setup E2E + Port Forward (Kind)",
            "args": [
                "${file}",
                "--network-layer",
                "istio",
                "-v",
                "-s",
                "--log-cli-level=INFO"
            ],
            "cwd": "${workspaceFolder}/test/e2e",
            "env": {
                "KSERVE_INGRESS_HOST_PORT": "localhost:8080",
                "PYTHONPATH": "${workspaceFolder}/python/kserve:${env:PYTHONPATH}"
            },
            "python": "${workspaceFolder}/python/kserve/.venv/bin/python",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        {
            "name": "E2E Marker (Kind)",
            "type": "debugpy",
            "request": "launch",
            "module": "pytest",
            "preLaunchTask": "Setup E2E + Port Forward (Kind)",
            "args": [
                "-m",
                "${input:marker}",
                "--network-layer",
                "istio",
                "-v",
                "-s",
                "--log-cli-level=INFO"
            ],
            "cwd": "${workspaceFolder}/test/e2e",
            "env": {
                "KSERVE_INGRESS_HOST_PORT": "localhost:8080",
                "PYTHONPATH": "${workspaceFolder}/python/kserve:${env:PYTHONPATH}"
            },
            "python": "${workspaceFolder}/python/kserve/.venv/bin/python",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        {
            "name": "E2E Test by Name (ODH/RHOAI)",
            "type": "debugpy",
            "request": "launch",
            "module": "pytest",
            "preLaunchTask": "Recreate E2E ns",
            "args": [
                "-k",
                "${input:testName}",
                "--network-layer",
                "${input:networkLayer}",
                "-v",
                "-s",
                "--log-cli-level=INFO"
            ],
            "cwd": "${workspaceFolder}/test/e2e",
            "env": {
                "PYTHONPATH": "${workspaceFolder}/python/kserve:${env:PYTHONPATH}"
            },
            "python": "${workspaceFolder}/python/kserve/.venv/bin/python",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        {
            "name": "E2E Test by Name (Kind)",
            "type": "debugpy",
            "request": "launch",
            "module": "pytest",
            "preLaunchTask": "Setup E2E + Port Forward (Kind)",
            "args": [
                "-k",
                "${input:testName}",
                "--network-layer",
                "istio",
                "-v",
                "-s",
                "--log-cli-level=INFO"
            ],
            "cwd": "${workspaceFolder}/test/e2e",
            "env": {
                "KSERVE_INGRESS_HOST_PORT": "localhost:8080",
                "PYTHONPATH": "${workspaceFolder}/python/kserve:${env:PYTHONPATH}"
            },
            "python": "${workspaceFolder}/python/kserve/.venv/bin/python",
            "console": "integratedTerminal",
            "justMyCode": false
        }
    ],
    "inputs": [
        {
            "id": "goTestPackage",
            "type": "promptString",
            "description": "Go package path",
            "default": "pkg/controller/v1beta1/inferenceservice"
        },
        {
            "id": "testRunPattern",
            "type": "promptString",
            "description": "Go test -run pattern (regex to match test function names)",
            "default": ""
        },
        {
            "id": "ginkgoFocus",
            "type": "promptString",
            "description": "Ginkgo focus pattern (regex to match spec names)",
            "default": ""
        },
        {
            "id": "testPath",
            "type": "promptString",
            "description": "Test path (e.g., predictor/test_sklearn.py::test_sklearn_kserve)",
            "default": "predictor/test_sklearn.py::test_sklearn_kserve"
        },
        {
            "id": "testName",
            "type": "promptString",
            "description": "Test name pattern (e.g., test_sklearn or test_sklearn_kserve)",
            "default": ""
        },
        {
            "id": "marker",
            "type": "pickString",
            "description": "Pytest marker",
            "options": [
                "predictor",
                "kserve_on_openshift",
                "graph",
                "path_based_routing",
                "batcher",
                "explainer",
                "transformer",
                "",
            ],
            "default": "predictor"
        },
        {
            "id": "networkLayer",
            "type": "pickString",
            "description": "Network layer",
            "options": [
                "istio",
                "istio-ingress",
                "envoy-gatewayapi",
                "istio-gatewayapi"
            ],
            "default": "istio"
        }
    ]
}